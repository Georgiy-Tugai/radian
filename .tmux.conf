### Powerline ###

# Improve performance of Powerline, see:
# http://powerline.readthedocs.io/en/master/usage/other.html#tmux-statusline
run "powerline-daemon -q"

# Enable Powerline; regarding the contents of .tmux.powerline.conf, see:
# http://powerline.readthedocs.io/en/master/usage/other.html#tmux-statusline
source ~/.tmux.powerline.conf

### Unbreak things ###

# Prevent tmux from messing up keybindings, see:
# https://wiki.archlinux.org/index.php/Tmux#xterm-keys
set -g xterm-keys on

# Prevent tmux from waiting half a second before processing the ESC key, see:
# http://unix.stackexchange.com/a/25638/176805
set -s escape-time 0

# Enable proper mouse support:
# http://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/
set -g mouse on

# Prevent tmux from messing up colors, see:
# http://askubuntu.com/a/133623
set -g default-terminal "screen-256color"

### Customization ###

# Attempt to set the title of the terminal emulator.
set -g set-titles on
set -g set-titles-string '#{session_name} - #{window_name}'

# Only resize to size of smallest client if smallest client is actually
# viewing the session; see:
# https://justin.abrah.ms/dotfiles/tmux.html
setw -g aggressive-resize on

# Show an indicator in the status bar on windows with unseen activity.
set -g monitor-activity on

# Automatically renumber windows when one is deleted, see:
# http://unix.stackexchange.com/a/51879/176805
set -g renumber-windows on

# Number windows and panes from 1, instead of 0; see:
# http://unix.stackexchange.com/a/35932/176805
set -g base-index 1
setw -g pane-base-index 1

# Don't automatically rename windows if they have been explicity
# renamed by the user.
set-option -g allow-rename off

# Increase the scrollback buffer size from 2000 to an effectively unlimited size.
set -g history-limit 1000000

### Keybindings ###

# Use ` instead of C-b as prefix key, see:
# http://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/
unbind C-b
set -g prefix `
bind ` send-prefix

# Turn off repeatability for moving between panes. Otherwise, if you split
# horizontally and switch panes, you will have to wait for the 'repeat period'
# to expire before you can use <Up> and <Down> to page through shell history.
#
# Doing it this way instead of using 'set-option -g repeat-time 0' makes it
# so that Control+Arrows and Meta+Arrows (for resizing panes) are still
# repeatable.
#
# See: http://superuser.com/a/325579/326239
bind Up select-pane -U
bind Down select-pane -D
bind Left select-pane -L
bind Right select-pane -R

# Keybinding for reloading .tmux.conf.
bind R source-file ~/.tmux.conf
